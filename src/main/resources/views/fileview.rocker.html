@import space.anity.DatabaseController
@import space.anity.UserHandler
@import io.javalin.*
@args (String content, String filename, String extension, Context ctx)

@css => {
<link href="/css/fileview.css" rel="stylesheet">
<link href="/css/markdown.css" rel="stylesheet">

@if((new DatabaseController()).isDarkTheme((new UserHandler()).getVerifiedUserId(ctx))) {
<link href="/css/darkTheme.css" rel="stylesheet"/>
} else {
<link href="/css/lightTheme.css" rel="stylesheet"/>
}
}

@js => {
<script>const extension = "@extension";</script>
<script src="/js/prettify.js"></script>
<script src="/js/markdown.js"></script>
<script src="/js/fileview.js"></script>
}

@layout.template("File " + filename, ctx, css, js) -> {
<button class="switch" id="raw">Show preview</button>
<span class="settings" id="settings">
    <label for="code">Linecount</label><input id="code" type="checkbox">
</span>
<pre class="prettyprint" id="content"><code class="lang-@extension">@content</code></pre>
<textarea class="modify" id="modify"></textarea>
<iframe class="preview" id="preview"></iframe>
}
